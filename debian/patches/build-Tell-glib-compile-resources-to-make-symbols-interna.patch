From: Simon McVittie <smcv@debian.org>
Date: Tue, 4 Jan 2022 17:41:34 +0000
Subject: build: Tell glib-compile-resources to make symbols internal where
 possible

Partial solution to https://gitlab.gnome.org/GNOME/gtk/-/issues/4598

Signed-off-by: Simon McVittie <smcv@debian.org>
Forwarded: https://gitlab.gnome.org/GNOME/gtk/-/merge_requests/4334
---
 gtk/meson.build | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/gtk/meson.build b/gtk/meson.build
index 6ce2c18..201af63 100644
--- a/gtk/meson.build
+++ b/gtk/meson.build
@@ -883,6 +883,7 @@ if not meson.is_cross_build() and build_machine.system() == 'linux' and objcopy.
       depfile : 'gtk.gresource.d',
       command : [glib_compile_resources,
                  '--generate',
+                 '--internal',
                  '--target=@OUTPUT@',
                  '--dependency-file=@DEPFILE@',
                  '--sourcedir=' + meson.current_source_dir(),
@@ -897,6 +898,7 @@ if not meson.is_cross_build() and build_machine.system() == 'linux' and objcopy.
       depfile : 'gtkresources.c.d',
       command : [glib_compile_resources,
                  '--generate-source',
+                 '--internal',
                  '--target=@OUTPUT@',
                  '--dependency-file=@DEPFILE@',
                  '--sourcedir=' + meson.current_source_dir(),
@@ -913,6 +915,7 @@ if not meson.is_cross_build() and build_machine.system() == 'linux' and objcopy.
       depfile : 'gtkresources.h.d',
       command : [glib_compile_resources,
                  '--generate-header',
+                 '--internal',
                  '--target=@OUTPUT@',
                  '--dependency-file=@DEPFILE@',
                  '--sourcedir=' + meson.current_source_dir(),
